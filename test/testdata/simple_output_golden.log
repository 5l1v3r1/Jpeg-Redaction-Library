Testing with loadall=false
Got marker ffe0 APPn at 2
APP ffe0 unsupported
Got marker ffdb DQT at 20
 sz 67 nextloc 89
Got marker ffdb DQT at 89
 sz 67 nextloc 158
Got marker ffc0 SOF0 at 158
SOF sz 17 nextloc 177
Component 1 H 2 V 2, Table 0
Component 2 H 1 V 1, Table 1
Component 3 H 1 V 1, Table 1
JPEG Image is 648 x 486
Got marker ffc4 DHT at 177
 sz 31 nextloc 210
Got marker ffc4 DHT at 210
 sz 181 nextloc 393
Got marker ffc4 DHT at 393
 sz 31 nextloc 426
Got marker ffc4 DHT at 426
 sz 181 nextloc 609
Got marker ffda SOS at 609
SOS slice 12
In scan found marker 0xffd9
EOI at 65719 (len 65106)
Testing with loadall=true
Got marker ffe0 APPn at 2
APP ffe0 unsupported
Got marker ffdb DQT at 20
 sz 67 nextloc 89
Got marker ffdb DQT at 89
 sz 67 nextloc 158
Got marker ffc0 SOF0 at 158
SOF sz 17 nextloc 177
Component 1 H 2 V 2, Table 0
Component 2 H 1 V 1, Table 1
Component 3 H 1 V 1, Table 1
JPEG Image is 648 x 486
Got marker ffc4 DHT at 177
 sz 31 nextloc 210
Didn't find 1
DHT 0 00. Bytes=29 total = 29 length = 29
Got marker ffc4 DHT at 210
 sz 181 nextloc 393
Didn't find 5
DHT 0 10. Bytes=179 total = 179 length = 179
Got marker ffc4 DHT at 393
 sz 31 nextloc 426
Didn't find 1
DHT 0 01. Bytes=29 total = 29 length = 29
Got marker ffc4 DHT at 426
 sz 181 nextloc 609
Didn't find 5
DHT 0 11. Bytes=179 total = 179 length = 179
Got marker ffda SOS at 609
SOS slice 12
In scan found marker 0xffd9
EOI at 65719 (len 65106)
Removed 934 stuff_bytes in 65104 now 64170
Expect 1271 MCUS. 82x62 blocks h:2 v:2


Decoding 64170
MCU 0 dc_value -72 y_value_ -147. Doubling gain to 1
MCU 5 dc_value 221 y_value_ 322. Doubling gain to 2
Got to 1271 mcus. 0 bits left.
Reordering Image 82, 62 = 5084 pixels. 5084 bytes. h,v 2,2
Saving Image 82, 62 = 5084 pixels. 5084 bytes
H 648 W 486
Saving : 9 markers
Saved marker ffe0 length 16
Saved marker ffdb length 67
Saved marker ffdb length 67
Saved marker ffc0 length 17
Saved marker ffc4 length 31
Saved marker ffc4 length 181
Saved marker ffc4 length 31
Saved marker ffc4 length 181
Inserted 934 stuff_bytes in 64170 now 65104
Saved marker ffda length 64172
Testing redaction
Got marker ffe0 APPn at 2
APP ffe0 unsupported
Got marker ffdb DQT at 20
 sz 67 nextloc 89
Got marker ffdb DQT at 89
 sz 67 nextloc 158
Got marker ffc0 SOF0 at 158
SOF sz 17 nextloc 177
Component 1 H 2 V 2, Table 0
Component 2 H 1 V 1, Table 1
Component 3 H 1 V 1, Table 1
JPEG Image is 648 x 486
Got marker ffc4 DHT at 177
 sz 31 nextloc 210
Didn't find 1
DHT 0 00. Bytes=29 total = 29 length = 29
Got marker ffc4 DHT at 210
 sz 181 nextloc 393
Didn't find 5
DHT 0 10. Bytes=179 total = 179 length = 179
Got marker ffc4 DHT at 393
 sz 31 nextloc 426
Didn't find 1
DHT 0 01. Bytes=29 total = 29 length = 29
Got marker ffc4 DHT at 426
 sz 181 nextloc 609
Didn't find 5
DHT 0 11. Bytes=179 total = 179 length = 179
Got marker ffda SOS at 609
SOS slice 12
In scan found marker 0xffd9
EOI at 65719 (len 65106)
Removed 934 stuff_bytes in 65104 now 64170
Expect 1271 MCUS. 82x62 blocks h:2 v:2


Decoding 64170
MCU 0 dc_value -72 y_value_ -147. Doubling gain to 1
MCU 5 dc_value 221 y_value_ 322. Doubling gain to 2
Got to 1271 mcus. 0 bits left.
Reordering Image 82, 62 = 5084 pixels. 5084 bytes. h,v 2,2
Redacted data length 54504
sos block now 54514 bytes
H 648 W 486
Redaction::10 strips
Strip (48,48: 143 MCUs) has 8020 bits (rep 1055), src 40095 dest 40095 diff 0 offset 0.
Strip (48,64: 184 MCUs) has 7977 bits (rep 1022), src 58844 dest 51879 diff 6965 offset 6965.
Strip (48,80: 225 MCUs) has 8693 bits (rep 1075), src 75715 dest 61795 diff 13920 offset 13920.
Strip (48,96: 266 MCUs) has 8296 bits (rep 1002), src 95764 dest 74226 diff 21538 offset 21538.
Strip (48,112: 307 MCUs) has 7224 bits (rep 978), src 115403 dest 86571 diff 28832 offset 28832.
Strip (48,128: 348 MCUs) has 7275 bits (rep 946), src 132502 dest 97424 diff 35078 offset 35078.
Strip (48,144: 389 MCUs) has 8228 bits (rep 997), src 149126 dest 107719 diff 41407 offset 41407.
Strip (48,160: 430 MCUs) has 11197 bits (rep 971), src 166433 dest 117795 diff 48638 offset 48638.
Strip (48,176: 471 MCUs) has 9666 bits (rep 950), src 187637 dest 128773 diff 58864 offset 58864.
Strip (48,192: 512 MCUs) has 10832 bits (rep 1163), src 209291 dest 141711 diff 67580 offset 67580.
Saving : 9 markers
Saved marker ffe0 length 16
Saved marker ffdb length 67
Saved marker ffdb length 67
Saved marker ffc0 length 17
Saved marker ffc4 length 31
Saved marker ffc4 length 181
Saved marker ffc4 length 31
Saved marker ffc4 length 181
Inserted 872 stuff_bytes in 54514 now 55386
Saved marker ffda length 64172
Got marker ffe0 APPn at 2
APP ffe0 unsupported
Got marker ffdb DQT at 20
 sz 67 nextloc 89
Got marker ffdb DQT at 89
 sz 67 nextloc 158
Got marker ffc0 SOF0 at 158
SOF sz 17 nextloc 177
Component 1 H 2 V 2, Table 0
Component 2 H 1 V 1, Table 1
Component 3 H 1 V 1, Table 1
JPEG Image is 648 x 486
Got marker ffc4 DHT at 177
 sz 31 nextloc 210
Didn't find 1
DHT 0 00. Bytes=29 total = 29 length = 29
Got marker ffc4 DHT at 210
 sz 181 nextloc 393
Didn't find 5
DHT 0 10. Bytes=179 total = 179 length = 179
Got marker ffc4 DHT at 393
 sz 31 nextloc 426
Didn't find 1
DHT 0 01. Bytes=29 total = 29 length = 29
Got marker ffc4 DHT at 426
 sz 181 nextloc 609
Didn't find 5
DHT 0 11. Bytes=179 total = 179 length = 179
Got marker ffda SOS at 609
SOS slice 12
In scan found marker 0xffd9
EOI at 65719 (len 65106)
Removed 937 stuff_bytes in 65104 now 64167
Expect 1271 MCUS. 82x62 blocks h:2 v:2


Decoding 64167
MCU 0 dc_value -72 y_value_ -147. Doubling gain to 1
MCU 5 dc_value 221 y_value_ 322. Doubling gain to 2
Dropping 2 left 1
DecodeOneMCU Caught Dropping more bits than we have
 at MCU 1270 of 1271
Reordering Image 82, 62 = 5084 pixels. 5084 bytes. h,v 2,2
Redacted data length 63288
sos block now 63298 bytes
H 648 W 486
Redaction::1 strips
Strip (48,64: 184 MCUs) has 7977 bits (rep 1022), src 58844 dest 58844 diff 0 offset 0.
Before patching size 63298
Patching in strip 0
Patch at 58924 (80) 1022->7977
Shifting data (506384 bits in 63298 bytes) up by 6955 bits starting at b58924 B7365. New length 513339
fb 8234 flm 1 fhm 254 so 1
Ended with src_byte 7364
i 8362 shift_final 5 mask hf8 l7
Saving : 9 markers
Saved marker ffe0 length 16
Saved marker ffdb length 67
Saved marker ffdb length 67
Saved marker ffc0 length 17
Saved marker ffc4 length 31
Saved marker ffc4 length 181
Saved marker ffc4 length 31
Saved marker ffc4 length 181
Inserted 934 stuff_bytes in 64168 now 65102
Saved marker ffda length 64169
Got marker ffe0 APPn at 2
APP ffe0 unsupported
Got marker ffdb DQT at 20
 sz 67 nextloc 89
Got marker ffdb DQT at 89
 sz 67 nextloc 158
Got marker ffc0 SOF0 at 158
SOF sz 17 nextloc 177
Component 1 H 2 V 2, Table 0
Component 2 H 1 V 1, Table 1
Component 3 H 1 V 1, Table 1
JPEG Image is 648 x 486
Got marker ffc4 DHT at 177
 sz 31 nextloc 210
Didn't find 1
DHT 0 00. Bytes=29 total = 29 length = 29
Got marker ffc4 DHT at 210
 sz 181 nextloc 393
Didn't find 5
DHT 0 10. Bytes=179 total = 179 length = 179
Got marker ffc4 DHT at 393
 sz 31 nextloc 426
Didn't find 1
DHT 0 01. Bytes=29 total = 29 length = 29
Got marker ffc4 DHT at 426
 sz 181 nextloc 609
Didn't find 5
DHT 0 11. Bytes=179 total = 179 length = 179
Got marker ffda SOS at 609
SOS slice 12
In scan found marker 0xffd9
EOI at 65719 (len 65106)
Removed 943 stuff_bytes in 65104 now 64161
Expect 1271 MCUS. 82x62 blocks h:2 v:2


Decoding 64161
MCU 0 dc_value -72 y_value_ -147. Doubling gain to 1
MCU 5 dc_value 221 y_value_ 322. Doubling gain to 2
Only 0 bits left
DecodeOneMCU Caught Bad number of bits left at MCU 1270 of 1271
Reordering Image 82, 62 = 5084 pixels. 5084 bytes. h,v 2,2
Redacted data length 48594
sos block now 48604 bytes
H 648 W 486
Redaction::11 strips
Strip (48,80: 238 MCUs) has 13672 bits (rep 1995), src 75715 dest 75715 diff 0 offset 0.
Strip (48,96: 279 MCUs) has 13048 bits (rep 2070), src 95764 dest 84087 diff 11677 offset 11677.
Strip (48,112: 320 MCUs) has 11200 bits (rep 1453), src 115403 dest 92748 diff 22655 offset 22655.
Strip (48,128: 361 MCUs) has 10962 bits (rep 1410), src 132502 dest 100100 diff 32402 offset 32402.
Strip (48,144: 402 MCUs) has 12017 bits (rep 1394), src 149126 dest 107172 diff 41954 offset 41954.
Strip (48,160: 443 MCUs) has 15378 bits (rep 1466), src 166433 dest 113856 diff 52577 offset 52577.
Strip (48,176: 484 MCUs) has 14171 bits (rep 1809), src 187637 dest 121148 diff 66489 offset 66489.
Strip (48,192: 525 MCUs) has 16902 bits (rep 1722), src 209291 dest 130440 diff 78851 offset 78851.
Strip (48,208: 566 MCUs) has 13576 bits (rep 1524), src 233161 dest 139130 diff 94031 offset 94031.
Strip (48,224: 607 MCUs) has 13449 bits (rep 1496), src 253518 dest 147435 diff 106083 offset 106083.
Strip (48,240: 648 MCUs) has 7856 bits (rep 1435), src 273553 dest 155517 diff 118036 offset 118036.
Before patching size 48604
Patching in strip 0
Patch at 75795 (80) 1995->13672
Shifting data (388832 bits in 48604 bytes) up by 11677 bits starting at b75795 B9474. New length 400509
fb 10934 flm 255 fhm 0 so 8
Ended with src_byte 9474
i 11183 shift_final 3 mask he0 l1f
Patching in strip 1
Patch at 95844 (80) 2070->13048
Shifting data (400509 bits in 50064 bytes) up by 10978 bits starting at b95844 B11980. New length 411487
fb 13352 flm 3 fhm 252 so 2
Ended with src_byte 11979
i 13611 shift_final 4 mask hf0 lf
Patching in strip 2
Patch at 115483 (80) 1453->11200
Shifting data (411487 bits in 51436 bytes) up by 9747 bits starting at b115483 B14435. New length 421234
fb 15653 flm 3 fhm 252 so 2
Ended with src_byte 14434
i 15835 shift_final 3 mask he0 l1f
Patching in strip 3
Patch at 132582 (80) 1410->10962
Shifting data (421234 bits in 52655 bytes) up by 9552 bits starting at b132582 B16572. New length 430786
fb 17766 flm 3 fhm 252 so 2
Ended with src_byte 16571
i 17942 shift_final 8 mask hff l0
Patching in strip 4
Patch at 149206 (80) 1394->12017
Shifting data (430786 bits in 53849 bytes) up by 10623 bits starting at b149206 B18650. New length 441409
fb 19978 flm 7 fhm 248 so 3
Ended with src_byte 18650
i 20152 shift_final 7 mask hfe l1
Patching in strip 5
Patch at 166513 (80) 1466->15378
Shifting data (441409 bits in 55177 bytes) up by 13912 bits starting at b166513 B20814. New length 455321
fb 22553 flm 127 fhm 128 so 7
Ended with src_byte 20813
i 22736 shift_final 3 mask he0 l1f
Patching in strip 6
Patch at 187717 (80) 1809->14171
Shifting data (455321 bits in 56916 bytes) up by 12362 bits starting at b187717 B23464. New length 467683
fb 25009 flm 1 fhm 254 so 1
Ended with src_byte 23463
i 25235 shift_final 8 mask hff l0
Patching in strip 7
Patch at 209371 (80) 1722->16902
Shifting data (467683 bits in 58461 bytes) up by 15180 bits starting at b209371 B26171. New length 482863
fb 28068 flm 1 fhm 254 so 1
Ended with src_byte 26170
i 28284 shift_final 1 mask h80 l7f
Patching in strip 8
Patch at 233241 (80) 1524->13576
Shifting data (482863 bits in 60358 bytes) up by 12052 bits starting at b233241 B29155. New length 494915
fb 30661 flm 7 fhm 248 so 3
Ended with src_byte 29154
i 30852 shift_final 1 mask h80 l7f
Patching in strip 9
Patch at 253598 (80) 1496->13449
Shifting data (494915 bits in 61865 bytes) up by 11953 bits starting at b253598 B31699. New length 506868
fb 33193 flm 1 fhm 254 so 1
Ended with src_byte 31698
i 33380 shift_final 7 mask hfe l1
Patching in strip 10
Patch at 273633 (80) 1435->7856
Shifting data (506868 bits in 63359 bytes) up by 6421 bits starting at b273633 B34204. New length 513289
fb 35006 flm 3 fhm 252 so 2
Ended with src_byte 34203
i 35186 shift_final 1 mask h80 l7f
Saving : 9 markers
Saved marker ffe0 length 16
Saved marker ffdb length 67
Saved marker ffdb length 67
Saved marker ffc0 length 17
Saved marker ffc4 length 31
Saved marker ffc4 length 181
Saved marker ffc4 length 31
Saved marker ffc4 length 181
Inserted 934 stuff_bytes in 64162 now 65096
Saved marker ffda length 64163
